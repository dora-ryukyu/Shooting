<!DOCTYPE html>
<html>
  <head>
    <title>シューティングゲーム</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      canvas {
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <canvas id="gameCanvas"></canvas>
    <script>
      // ゲーム画面のサイズ
      const canvasWidth = window.innerWidth;
      const canvasHeight = window.innerHeight;

      // キャンバスの取得
      const canvas = document.getElementById("gameCanvas");
      canvas.width = canvasWidth;
      canvas.height = canvasHeight;

      // 描画コンテキストの取得
      const context = canvas.getContext("2d");

      // 敵の初期位置
      let enemyX = canvasWidth / 2;
      let enemyY = 50;

      // 弾の初期位置
      let bulletX = canvasWidth / 2;
      let bulletY = canvasHeight - 50;

      // タッチの情報
      let touchStartX = null;
      let touchMoveX = null;

      // タッチ開始時の処理
      document.addEventListener("touchstart", (event) => {
        touchStartX = event.touches[0].clientX;
        touchMoveX = null;
      });

      // タッチ移動時の処理
      document.addEventListener("touchmove", (event) => {
        touchMoveX = event.touches[0].clientX;
      });

      // ゲームループ
      function gameLoop() {
        // 背景の描画
        context.fillStyle = "black";
        context.fillRect(0, 0, canvasWidth, canvasHeight);

        // 敵の描画
        context.fillStyle = "red";
        context.fillRect(enemyX, enemyY, 50, 50);

        // 弾の描画
        context.fillStyle = "white";
        context.fillRect(bulletX, bulletY, 10, 20);

        // 敵が弾に当たった場合
        if (bulletX > enemyX && bulletX < enemyX + 50 && bulletY < enemyY + 50) {
          enemyX = Math.random() * canvasWidth;
          enemyY = 50;
        }

        // 敵の移動
        enemyY += 5;
        if (enemyY > canvasHeight) {
          enemyX = Math.random() * canvasWidth;
          enemyY = 50;
        }

        // 弾が画面外に出た場合
        if (bulletY < 0) {
          bulletX = canvasWidth / 2;
          bulletY = canvasHeight - 50;
        }

        // タッチによる移動
        if (touchMoveX !== null) {
          if (touchMoveX < touchStartX) {
            bulletX -= 10;
          } else if (touchMoveX > touchStartX) {
            bulletX += 10;
          }
        }

        // 弾の移動
        bulletY -= 10;

        // 次のフレームの描画
        requestAnimationFrame(gameLoop);
      }

      // ゲームの開始
      gameLoop();
    </script>
  </body>
</html>
